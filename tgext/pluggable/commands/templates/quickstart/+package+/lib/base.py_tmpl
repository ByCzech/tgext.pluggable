from tg import TGController, request, tmpl_context

class BaseController(TGController):
    def __call__(self, environ, start_response):
        request.identity = request.environ.get('repoze.who.identity')
        tmpl_context.identity = request.identity
        return TGController.__call__(self, environ, start_response)
